<!DOCTYPE html>
<html class="light" lang="es">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Recuperar Contraseña</title>

  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet"/>

  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#137fec",
            "background-light": "#F8F9FA",
            "background-dark": "#101922",
          },
          fontFamily: {
            display: ["Inter", "sans-serif"],
          },
          borderRadius: {
            xl: "0.75rem",
          },
        },
      },
    }
  </script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>

<body class="bg-background-light dark:bg-background-dark font-display">
  <div class="min-h-screen flex items-center justify-center px-4">
    <div class="w-full max-w-md">

      <!-- Logo / icono -->
      <div class="w-full flex justify-center mb-6">
        <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center">
          <span class="text-2xl font-black text-primary">A</span>
        </div>
      </div>

      <!-- Título -->
      <div class="w-full text-center mb-6">
        <p class="text-[#343A40] dark:text-white text-3xl sm:text-4xl font-black leading-tight tracking-tight">
          Recuperar Contraseña
        </p>
        <p class="text-[#343A40] dark:text-gray-300 text-base mt-3">
          Ingresa el correo electrónico asociado a tu cuenta y te enviaremos una
          nueva contraseña temporal.
        </p>
      </div>

      <!-- Mensajes flash -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="mb-4">
            {% for category, message in messages %}
              <div class="rounded-lg px-3 py-2 text-sm mb-2
                  {% if category == 'danger' %}
                    bg-red-100 text-red-800 border border-red-200
                  {% elif category == 'success' %}
                    bg-green-100 text-green-800 border border-green-200
                  {% else %}
                    bg-slate-100 text-slate-800 border border-slate-200
                  {% endif %}
              ">
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <!-- FORMULARIO -->
      <form method="POST" action="{{ url_for('auth.forgot_password') }}" class="space-y-5">

        <!-- Correo -->
        <div>
          <label class="block text-base font-medium leading-normal pb-2 text-[#343A40] dark:text-gray-300">
            Correo Electrónico
          </label>
          <input
            class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-[#343A40] dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-gray-300 dark:border-gray-600 bg-background-light dark:bg-background-dark h-12 placeholder:text-gray-400 dark:placeholder:text-gray-500 px-4 text-base"
            placeholder="Correo electrónico"
            type="email"
            name="correo"
            required
          />
        </div>

        <!-- Botón -->
        <div class="w-full my-2">
          <button
            class="flex min-w-[84px] w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-5 bg-primary text-white text-base font-bold leading-normal tracking-[0.015em] hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:ring-offset-background-dark">
            <span class="truncate">Enviar instrucciones</span>
          </button>
        </div>
      </form>

      <!-- Volver al login -->
      <div class="w-full text-center mt-6">
        <a class="text-primary hover:underline text-sm font-normal leading-normal"
           href="{{ url_for('auth.login') }}">
          ¿Recuerdas tu contraseña? Volver al inicio de sesión
        </a>
      </div>

      <!-- Footer -->
      <div class="w-full text-center py-4 mt-8">
        <p class="text-gray-500 dark:text-gray-400 text-xs">
          © 2024 Sistema de Álgebra Inteligente. Todos los derechos reservados.
        </p>
      </div>
    </div>
  </div>
</body>
</html>
